# 数学题答案解析 - 实现任务

## 1. 项目与依赖

- [x] 1.1 初始化 Go 模块与项目目录（cmd、internal、pkg 等）
- [x] 1.2 引入 langchaingo 及大模型/多模态依赖，配置 API 与鉴权
- [x] 1.3 新增大模型统一配置文件（如 config/models.yaml）：OCR 识图、LLM 题目解析、视频生成（Phase 2）三者在同一文件内分块配置，字段含 provider/model/api_base/api_key_env 等（见 design 配置结构）
- [x] 1.4 实现配置加载逻辑：启动时读取对应配置并注入识图、解析、视频模块，敏感信息支持环境变量覆盖
- [x] 1.5 初始化 Vue 3 前端项目，配置构建与代理
- [x] 1.6 前端引入 KaTeX（或等价）用于公式渲染

## 2. 后端：题目输入与识图

- [x] 2.1 实现图片上传接口（接收文件、校验类型与大小、落盘或对象存储）
- [x] 2.2 实现「图片 → 题目文本」识图能力（多模态/视觉 API，输出含 LaTeX），使用 OCR 配置块
- [x] 2.3 提供「提交题目」统一接口：支持仅文本或先传图再以识图结果作为文本

## 3. 后端：分步解析生成

- [x] 3.1 设计并实现解析结果数据结构（步骤序列：title、content、imagePrompt 等）
- [x] 3.2 使用 langchaingo 调用大模型，基于题目文本生成分步解析（输出结构化步骤 + LaTeX 公式），使用 LLM 题目解析配置块
- [x] 3.3 将解析结果持久化或放入任务结果，供前端与配图步骤使用

## 4. 后端：步骤讲解图生成

- [x] 4.1 接入文生图/绘图 API，实现单步「描述 → 图片」生成
- [x] 4.2 按步骤顺序为每步生成一张讲解图，与步骤 ID 绑定并存储 URL 或二进制
- [x] 4.3 将步骤与配图关联写入同一解析结果结构，供前端按步展示

## 5. 后端：异步与 API 设计（可选）

- [x] 5.1 若解析+配图耗时长，实现异步任务（创建任务、轮询状态、获取结果）
- [x] 5.2 提供「获取解析结果」接口：返回步骤列表 + 每步文字与配图 URL

## 6. 前端：题目输入页

- [x] 6.1 实现「上传题目图片」与「输入题目文字」两个并列入口，UI 清晰
- [x] 6.2 上传后调用识图接口，展示识别出的题目文本并支持用户编辑
- [x] 6.3 实现「开始解析」提交（以当前题目文本或任务 ID 请求后端）
- [x] 6.4 识图失败时展示错误提示，提供「重新上传」或「改为输入文字」入口

## 7. 前端：解析结果页

- [x] 7.1 按步骤渲染：每步展示标题/序号、正文、对应一张配图（一步一文一图）
- [x] 7.2 正文中 LaTeX 公式用 KaTeX 渲染，保证正确、不乱码、排版协调
- [x] 7.3 步骤多时提供步骤导航或锚点，便于跳转
- [x] 7.4 支持点击配图放大查看（灯箱/弹层）及关闭
- [x] 7.5 某步无配图时显示占位或「本步无配图」，不破坏顺序

## 8. 前端：加载与错误

- [x] 8.1 解析进行中展示明确加载状态（文案 + 加载指示），避免白屏
- [x] 8.2 解析失败或超时时展示错误提示，提供重试或返回输入页入口
- [x] 8.3 若采用异步任务，实现轮询或 WebSocket 并在就绪后跳转/展示结果

## 9. 联调与验收

- [x] 9.1 端到端：上传图片 → 识图 → 编辑 → 解析 → 结果页步骤与配图正确对应
- [x] 9.2 端到端：输入文字 → 解析 → 结果页公式渲染正确、无乱码
- [x] 9.3 检查错误与边界：无效文件、识图失败、解析失败均有明确反馈与可操作入口
