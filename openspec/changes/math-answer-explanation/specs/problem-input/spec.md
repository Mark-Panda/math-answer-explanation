# Capability: problem-input

题目输入：支持用户通过上传题目图片（含截图）或输入题目文字提交题目，并对识别结果进行确认或编辑后提交解析。

## ADDED Requirements

### Requirement: 支持上传题目图片

系统 SHALL 提供上传入口，允许用户选择本地图片文件（含截图）作为题目来源。支持的图片格式 SHALL 包含常见格式（如 PNG、JPEG、WebP 等）。

#### Scenario: 用户上传图片成功

- **WHEN** 用户点击上传并选择一张有效题目图片
- **THEN** 系统接受文件并展示上传结果（如缩略图或“已上传”状态），并进入后续识图或解析流程

#### Scenario: 用户上传非图片或无效文件

- **WHEN** 用户选择非图片类型或损坏文件
- **THEN** 系统 SHALL 给出明确错误提示并允许重新选择

### Requirement: 支持输入题目文字

系统 SHALL 提供文字输入入口，允许用户直接输入或粘贴题目文字，作为题目来源。

#### Scenario: 用户输入或粘贴题目文字

- **WHEN** 用户在文字输入框中输入或粘贴题目内容
- **THEN** 系统接受该文本作为题目来源，并允许用户在此基础上提交解析

### Requirement: 上传与文字为并列入口

系统 SHALL 在界面中同时提供「上传题目图片」与「输入题目文字」两个并列入口，且不提供单独的拍照入口。

#### Scenario: 用户仅使用上传

- **WHEN** 用户仅使用上传图片方式
- **THEN** 系统仅基于上传的图片进行后续处理（识图后得到题目文本）

#### Scenario: 用户仅使用文字输入

- **WHEN** 用户仅使用文字输入方式
- **THEN** 系统直接使用该文字作为题目文本进行后续解析

### Requirement: 图片识别结果可编辑并提交解析

当题目来源为图片时，系统 SHALL 在识图完成后向用户展示识别出的题目文本，并 SHALL 允许用户编辑该文本；编辑后用户可触发「开始解析」。

#### Scenario: 用户确认识别结果并解析

- **WHEN** 用户查看识别出的题目文本后点击「开始解析」（未编辑或编辑后）
- **THEN** 系统以当前展示的题目文本为准发起解析请求

#### Scenario: 用户编辑识别结果后解析

- **WHEN** 用户修改识别出的题目文本后点击「开始解析」
- **THEN** 系统以用户修改后的文本为准发起解析请求

### Requirement: 识别失败时有明确反馈

当图片识别失败（如无法识别、非数学题等）时，系统 SHALL 向用户展示明确错误提示，并 SHALL 提供重新上传或切换为文字输入的入口。

#### Scenario: 识图失败

- **WHEN** 后端返回识图失败或结果不可用
- **THEN** 前端展示错误说明，并提供「重新上传」或「改为输入文字」等可操作入口
